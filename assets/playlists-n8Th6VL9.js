import{p as e,w as P,v as k,a as o}from"./chunk-PVWAREVJ-CJI3TL4J.js";import{s as x}from"./spotify-B_RBuzy7.js";import{B as v}from"./BlinkingText-DJjh669V.js";const m=({children:c,variant:t="primary",glow:l=!1,float:n=!1,className:r="",...h})=>{const i={primary:"retro-button",secondary:"retro-button bg-retro-gray",cosmic:"retro-button cosmic-border bg-space-purple",alert:"retro-button bg-warning-red blink"}[t],d=[l&&"neon-glow",n&&"float-element",r].filter(Boolean).join(" ");return e.jsx("button",{className:`${i} ${d}`,...h,children:c})},E=({label:c,description:t,className:l="",checked:n,...r})=>e.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer ${l}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"sr-only",checked:n,...r}),e.jsx("div",{className:`w-6 h-6 cosmic-border flex items-center justify-center text-lg font-bold transition-all ${n?"bg-neon-green text-cosmic-black":"bg-deep-space text-neon-cyan"}`,children:n?"×":""})]}),(c||t)&&e.jsxs("div",{className:"flex-1",children:[c&&e.jsx("div",{className:`terminal-text font-bold transition-colors ${n?"text-neon-green":"text-retro-gray"}`,children:c}),t&&e.jsx("div",{className:"text-sm text-neon-cyan",children:t})]})]}),O=()=>[{title:"🎵 Cosmic Playlist Selection - PeloJams"}],I=P(function(){const t=k(),[l,n]=o.useState(null),[r,h]=o.useState([]),[i,d]=o.useState(new Set),[g,j]=o.useState(!0),[N,f]=o.useState(null);o.useEffect(()=>{(async()=>{try{if(!x.isAuthenticated()){t("/");return}const a=localStorage.getItem("spotify_user");a&&n(JSON.parse(a));const u=x.getStoredTokens();if(!u){t("/");return}const C=await x.getUserPlaylists(u.access_token);h(C),j(!1)}catch(a){console.error("Error loading playlists:",a),f(a instanceof Error?a.message:"Failed to load playlists"),j(!1)}})()},[t]);const w=s=>{const a=new Set(i);a.has(s)?a.delete(s):a.add(s),d(a)},b=()=>{d(new Set(r.map(s=>s.id)))},p=()=>{d(new Set)},y=()=>{if(i.size===0){alert("Please select at least one playlist to continue your cosmic journey!");return}const s=Array.from(i).join(",");t(`/bpm-processing?playlists=${s}`)},S=()=>{x.logout(),t("/")};return g?e.jsx("div",{className:"stars-background min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"retro-window max-w-md mx-auto",children:[e.jsx("div",{className:"retro-window-header",children:e.jsx("span",{children:"🛸 LOADING COSMIC PLAYLISTS 🛸"})}),e.jsxs("div",{className:"retro-window-content text-center",children:[e.jsx("div",{className:"text-6xl mb-4 text-neon-cyan blink",children:"🔄"}),e.jsx("div",{className:"terminal-text",children:e.jsx(v,{speed:"fast",children:"Scanning your music library from space..."})}),e.jsx("div",{className:"retro-progress-bar mt-4",children:e.jsx("div",{className:"retro-progress-fill animate-pulse"})})]})]})}):N?e.jsx("div",{className:"stars-background min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"retro-window max-w-md mx-auto",children:[e.jsx("div",{className:"retro-window-header",children:e.jsx("span",{children:"❌ TRANSMISSION ERROR ❌"})}),e.jsxs("div",{className:"retro-window-content text-center",children:[e.jsx("div",{className:"text-6xl mb-4 text-warning-red blink-fast",children:"⚠️"}),e.jsx("div",{className:"terminal-text text-warning-red mb-4",children:N}),e.jsx(m,{onClick:()=>t("/"),variant:"alert",children:"Return to Base"})]})]})}):e.jsxs("div",{className:"stars-background min-h-screen",children:[e.jsx("header",{className:"cosmic-border-b p-4",children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-2xl",children:"🎧"}),e.jsxs("div",{children:[e.jsx("div",{className:"terminal-text font-bold text-neon-green",children:"COSMIC CONNECTION ESTABLISHED"}),e.jsxs("div",{className:"text-sm",children:["Welcome, ",(l==null?void 0:l.display_name)||"Space Traveler"," 👋"]})]})]}),e.jsx(m,{onClick:S,variant:"secondary",className:"text-sm",children:"Disconnect"})]})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold rainbow-text mb-4",children:"SELECT YOUR COSMIC PLAYLISTS"}),e.jsxs("div",{className:"terminal-text text-lg",children:[e.jsx(v,{speed:"medium",color:"var(--neon-cyan)",children:"►"})," ","Choose which playlists to include in your workout algorithm"]})]}),e.jsxs("div",{className:"retro-window max-w-2xl mx-auto mb-8",children:[e.jsx("div",{className:"retro-window-header",children:e.jsx("span",{children:"🎛️ PLAYLIST CONTROL PANEL 🎛️"})}),e.jsxs("div",{className:"retro-window-content",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"terminal-text",children:[e.jsx("span",{className:"text-neon-green",children:i.size})," ","of ",e.jsx("span",{className:"text-neon-cyan",children:r.length})," ","playlists selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{onClick:b,variant:"secondary",className:"text-sm",children:"Select All"}),e.jsx(m,{onClick:p,variant:"secondary",className:"text-sm",children:"Clear All"})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(m,{onClick:y,variant:"cosmic",glow:!0,disabled:i.size===0,className:"text-lg px-8 py-3",children:"🛸 ANALYZE BPM & CONTINUE 🛸"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:r.map(s=>e.jsxs("div",{className:"retro-window",children:[e.jsx("div",{className:"retro-window-header",children:e.jsx(E,{checked:i.has(s.id),onChange:()=>w(s.id),label:s.name})}),e.jsx("div",{className:"retro-window-content",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-retro-gray cosmic-border flex items-center justify-center text-2xl",children:s.images[0]?e.jsx("img",{src:s.images[0].url,alt:s.name,className:"w-full h-full object-cover"}):"🎵"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"terminal-text font-bold text-sm mb-1 truncate",children:s.name}),e.jsxs("div",{className:"text-xs text-neon-cyan mb-2",children:[s.tracks.total," tracks"]}),s.description&&e.jsx("div",{className:"text-xs text-gray-400 line-clamp-2",children:s.description})]})]})})]},s.id))}),r.length===0&&e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"retro-window max-w-md mx-auto",children:[e.jsx("div",{className:"retro-window-header",children:e.jsx("span",{children:"🤔 NO PLAYLISTS DETECTED"})}),e.jsxs("div",{className:"retro-window-content text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"📂"}),e.jsx("div",{className:"terminal-text mb-4",children:"No playlists found in your cosmic music library!"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Create some playlists in Spotify first, then return to begin your journey."})]})]})})]})]})});export{I as default,O as meta};
