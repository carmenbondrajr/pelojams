import{w as p,x as v,v as w,a as c,p as e}from"./chunk-PVWAREVJ-CJI3TL4J.js";import{s as n}from"./spotify-B_RBuzy7.js";import{B as o}from"./BlinkingText-DJjh669V.js";const I=()=>[{title:"üõ∏ Spotify Authentication - PeloJams"}],T=p(function(){const[i]=v(),a=w(),[s,l]=c.useState("loading"),[u,r]=c.useState("Establishing cosmic connection...");c.useEffect(()=>{(async()=>{try{const t=i.get("code"),d=i.get("error");if(d)throw new Error(`Spotify authorization failed: ${d}`);if(!t)throw new Error("No authorization code received from Spotify");r("Exchanging cosmic frequencies...");const m=localStorage.getItem("spotify_code_verifier");if(!m)throw new Error("Code verifier not found - authentication flow corrupted");const x=await n.getAccessToken(t,m);n.storeTokens(x),localStorage.removeItem("spotify_code_verifier"),r("Retrieving user profile from the mothership...");const g=await n.getCurrentUser(x.access_token);localStorage.setItem("spotify_user",JSON.stringify(g)),l("success"),r("üõ∏ CONNECTION ESTABLISHED! Redirecting to mission control..."),setTimeout(()=>{a("/playlists")},2e3)}catch(t){console.error("Spotify authentication error:",t),l("error"),r(t instanceof Error?t.message:"Unknown error occurred"),setTimeout(()=>{a("/")},3e3)}})()},[i,a]);const h=()=>{switch(s){case"loading":return"üîÑ";case"success":return"‚úÖ";case"error":return"‚ùå";default:return"üõ∏"}},f=()=>{switch(s){case"loading":return"text-neon-cyan blink";case"success":return"text-neon-green";case"error":return"text-warning-red blink-fast";default:return"text-neon-cyan"}};return e.jsx("div",{className:"stars-background min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"retro-window max-w-md mx-auto",children:[e.jsx("div",{className:"retro-window-header",children:e.jsx("span",{children:"üì° SPOTIFY TRANSMISSION STATUS üì°"})}),e.jsxs("div",{className:"retro-window-content text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:`text-6xl mb-4 ${f()}`,children:h()}),e.jsxs("div",{className:"terminal-text text-lg",children:[e.jsx(o,{speed:"fast",color:"var(--warning-red)",children:s==="loading"?"‚ñ∫":s==="success"?"‚úì":"!"})," ",u]})]}),s==="loading"&&e.jsxs("div",{className:"cosmic-loading",children:[e.jsx("div",{className:"terminal-text text-sm",children:"Please wait while we sync with the cosmic frequencies..."}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"retro-progress-bar",children:e.jsx("div",{className:"retro-progress-fill animate-pulse"})})})]}),s==="error"&&e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"terminal-text text-sm text-warning-red",children:e.jsx(o,{speed:"fast",children:"TRANSMISSION FAILED - REDIRECTING TO BASE..."})})}),s==="success"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"terminal-text text-sm text-neon-green",children:"Welcome to the cosmic cycling collective! üö¥‚Äç‚ôÇÔ∏è"}),e.jsx("div",{className:"mt-2 text-xs",children:e.jsx(o,{speed:"medium",children:"Redirecting to playlist selection..."})})]})]})]})})});export{T as default,I as meta};
